<div class="book-list-container">
  <h1 class="list-title">Book Collection</h1>

  <div class="container">
    <div class="d-flex justify-content-start my-4">
      <button class="add-to-cart-btn" [routerLink]="'../add'">Add Book</button>
    </div>

     <div class="search-sort-container">
        <!-- Search Input -->
        <div class="search-box">
          <input 
            type="text" 
            [formControl]="searchControl"
            placeholder="Search by title..."
          >
          <svg class="search-icon" viewBox="0 0 24 24">
            <path fill="currentColor" d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
          </svg>
        </div>
        
        <!-- Sort Dropdown -->
        <div class="sort-dropdown">
          <select [formControl]="sortControl">
            <option value="" disabled selected hidden>Sort by</option>
            <option value="price">Price</option>
            <option value="title">title</option>
          
          </select>
          <svg class="dropdown-icon" viewBox="0 0 24 24">
            <path fill="currentColor" d="M7,10L12,15L17,10H7Z"/>
          </svg>
        </div>
        </div>
    
    <!-- Empty State Container -->
    @if (books().length === 0) {
      <div class="empty-state">
        <div class="empty-state-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 6H5H21" stroke="#003049" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" 
                  stroke="#669BBC" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M10 11V17" stroke="#003049" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M14 11V17" stroke="#003049" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h2 class="empty-state-title">No Books Yet</h2>
        <p class="empty-state-message">Your bookshelf is waiting to be filled with amazing stories.</p>
        <button class="empty-state-button" [routerLink]="'../add'">Add Your First Book</button>
      </div>
    } @else {
      
        
      <div class="books-grid">
        @for (book of books(); track book.title) {

          <div class="book-card">
            <div class="book-header">
              <div>
                  <h2 class="book-title mb-4">{{ book.title }}</h2>
                  @if (book.category) {
                    <span class="book-category">{{ book.category }}</span>
                  }
              </div>
              <div class="d-flex justify-content-end">
                <button mat-button [matMenuTriggerFor]="menu">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- Three vertical dots -->
                    <circle cx="12" cy="6" r="2" fill="currentColor"/>
                    <circle cx="12" cy="12" r="2" fill="currentColor"/>
                    <circle cx="12" cy="18" r="2" fill="currentColor"/>
                  </svg>
                </button>
                <mat-menu #menu="matMenu">
                  <button mat-menu-item [routerLink]="['../edit', book.id]">
                    <svg class="menu-icon" viewBox="0 0 24 24">
                      <path fill="currentColor" d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/>
                    </svg>
                    <span>Edit</span>
                  </button>
                  <button mat-menu-item (click)="deleteItem(book.id)">
                    <svg class="menu-icon" viewBox="0 0 24 24">
                      <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                    </svg>
                    <span>Delete</span>
                  </button>
                </mat-menu>
              </div>
            </div>
            
            <p class="book-author">By {{ book.author }}</p>
            
            <p class="book-description">{{ book.description }}</p>
            
            <div class="book-footer">
              <span class="book-price">${{ book.price.toFixed(2) }}</span>
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>